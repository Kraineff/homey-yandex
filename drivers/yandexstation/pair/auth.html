<script type="application/javascript">
    Homey.emit("start").then((view => {
        if (view === "list_devices") {
            Homey.showView(view);
        } else {
            Homey.setTitle(Homey.__("auth.title"));
            document.getElementById("wrapper").style.display = "flex";
            document.getElementById("ya-button").href = view;

            let check = setInterval(() => {
                Homey.emit("check").then((result) => {
                    if (result) {
                        clearInterval(check);
                        Homey.showView("list_devices");
                    }
                });
            }, 5000);
        }
    }));
</script>

<style type="text/css">
    #wrapper {
        display: none;
        flex-direction: column;
        width: 100%;
        height: 100%;
    }
</style>

<div id="wrapper">
    <p style="height: 100%;" data-i18n="auth.desc"></p>
    <a id="ya-button" class="button" target="_blank" style="text-decoration: none; text-align: center; background-color: #00c139; color: white;" data-i18n="auth.button"></a>
</div>